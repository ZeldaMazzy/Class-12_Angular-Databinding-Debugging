"use strict";(self.webpackChunkBookIt=self.webpackChunkBookIt||[]).push([[226],{3226:(Y,p,r)=>{r.r(p),r.d(p,{BookshelfModule:()=>N});var a=r(6110),o=r(1223),c=r(8038);let h=(()=>{class e{constructor(t,i,l){this.activatedRoute=t,this.bookshelfService=i,this.router=l}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.bookIndex=+t["book-id"],this.book=this.bookshelfService.getBookByIndex(this.bookIndex),this.bookshelfService.bookSelected.next(this.book)})}onEditBook(){this.router.navigate(["../",this.bookIndex,"edit"],{relativeTo:this.activatedRoute})}onRemoveBook(){this.bookshelfService.removeBookByIndex(this.bookIndex),this.router.navigate(["/bookshelf"])}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.gz),o.Y36(c.c),o.Y36(a.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-details"]],decls:32,vars:6,consts:[[1,"row","mb-4"],[1,"col-12"],[1,"m-0"],[1,"row"],[1,"img-responsive",2,"max-width","100%",3,"src","alt","title"],[2,"width","100%","text-align","center"],["type","button","title","Edit Book",1,"btn","btn-light","btn-sm","mx-1",3,"click"],[1,"material-symbols-outlined"],["type","button","title","Delete Book",1,"btn","btn-outline-danger","btn-sm","mx-1",3,"click"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"p",2),o.TgZ(3,"strong"),o._uU(4,"Book Title"),o.qZA(),o.qZA(),o.TgZ(5,"h3",2),o._uU(6),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",3),o.TgZ(8,"div",1),o.TgZ(9,"p",2),o._uU(10,"Author"),o.qZA(),o.TgZ(11,"h5",2),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",3),o.TgZ(14,"div",1),o.TgZ(15,"p"),o._uU(16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",3),o.TgZ(18,"div",1),o._UZ(19,"img",4),o.qZA(),o.qZA(),o.TgZ(20,"div",3),o.TgZ(21,"div",1),o.TgZ(22,"small"),o._uU(23,"Tags"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"div",3),o.TgZ(25,"div",5),o.TgZ(26,"button",6),o.NdJ("click",function(){return i.onEditBook()}),o.TgZ(27,"span",7),o._uU(28," edit "),o.qZA(),o.qZA(),o.TgZ(29,"button",8),o.NdJ("click",function(){return i.onRemoveBook()}),o.TgZ(30,"span",7),o._uU(31," delete "),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(6),o.Oqu(i.book.title),o.xp6(6),o.Oqu(i.book.author),o.xp6(4),o.hij("Genre: ",i.book.genre,""),o.xp6(3),o.Q6J("src",i.book.coverImgPath,o.LSH)("alt",i.book.title)("title",i.book.title))},styles:[""]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-bookshelf-home"]],decls:2,vars:0,consts:[["role","alert",1,"alert","alert-primary","mt-5"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o._uU(1," Please select a book!\n"),o.qZA())},styles:[""]}),e})();var k=r(727),b=r(8549);let Z=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.s_b))},e.\u0275dir=o.lG2({type:e,selectors:[["","appPlaceholder",""]]}),e})();var u=r(9808),v=r(7388);function T(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"div",4),o.TgZ(1,"div",5),o._UZ(2,"app-book",6),o.TgZ(3,"button",7),o.NdJ("click",function(){const m=o.CHM(t).index;return o.oxw().onRemoveBook(m)}),o._uU(4," \u2212 "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=n.$implicit,i=n.index;o.xp6(2),o.Q6J("book",t)("bookIndex",i)}}let A=(()=>{class e{constructor(t){this.bookshelfService=t,this.bookList=[]}ngOnInit(){this.bookshelfService.getAllBooks(),this.bookshelfService.bookListChanged.subscribe(t=>{this.bookList=t.slice()})}onRemoveBook(t){this.bookshelfService.removeBookByIndex(t)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-list"]],decls:5,vars:1,consts:[[1,"row","my-2"],[1,"col-12"],["type","button","routerLink","new-book",1,"btn","btn-outline-primary","btn-sm","float-right"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"row","mb-3"],[1,"col-md-12",2,"display","flex"],[2,"width","100%",3,"book","bookIndex"],[1,"float-right","btn","btn-outline-danger",2,"border","none","font-size","16px",3,"click"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"button",2),o._uU(3,"Add New Book"),o.qZA(),o.qZA(),o.qZA(),o.YNc(4,T,5,2,"div",3)),2&t&&(o.xp6(4),o.Q6J("ngForOf",i.bookList))},directives:[a.rH,u.sg,v.W],styles:[""]}),e})(),_=(()=>{class e{constructor(t,i){this.service=t,this.factory=i,this.bookSelected$=new k.w0}ngOnInit(){this.bookSelected$=this.service.bookSelected.subscribe({next:t=>{this.displayBookRemovalAlert(`Successfully removed ${t.title} from your personal library.`)}})}ngOnDestroy(){this.bookSelected$.unsubscribe()}displayBookRemovalAlert(t){const i=this.factory.resolveComponentFactory(b.w),l=this.alertHost.viewContainerRef;l.clear();const m=l.createComponent(i);m.instance.message=t;const d=()=>{this.modalCloseSub.unsubscribe(),l.clear()};this.modalCloseSub=m.instance.closeModal.subscribe(()=>{d()}),setTimeout(()=>{this.modalCloseSub&&d()},4e3)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.c),o.Y36(o._Vd))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-bookshelf"]],viewQuery:function(t,i){if(1&t&&o.Gf(Z,5),2&t){let l;o.iGM(l=o.CRH())&&(i.alertHost=l.first)}},decls:7,vars:0,consts:[[1,"row","justify-between"],[1,"col-lg-6","col-md-12"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h5"),o._uU(3,"My Saved Books"),o.qZA(),o._UZ(4,"app-book-list"),o.qZA(),o.TgZ(5,"div",1),o._UZ(6,"router-outlet"),o.qZA(),o.qZA())},directives:[A,a.lC],styles:[""]}),e})();var s=r(2382);function B(e,n){1&e&&(o.TgZ(0,"span",21),o._uU(1,"Title Is Required"),o.qZA())}function q(e,n){1&e&&(o.TgZ(0,"span",21),o._uU(1,"Title Is WAAAAY too long man"),o.qZA())}function x(e,n){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,B,2,0,"span",17),o.YNc(2,q,2,0,"span",17),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.getErrors("title")),o.xp6(1),o.Q6J("ngIf",t.getErrors("title","maxlength"))}}function y(e,n){1&e&&(o.TgZ(0,"span",21),o._uU(1,"Author Is Required"),o.qZA())}function C(e,n){1&e&&(o.TgZ(0,"span",21),o._uU(1,"Nobody's name is this long."),o.qZA())}function F(e,n){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,y,2,0,"span",17),o.YNc(2,C,2,0,"span",17),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.getErrors("author")),o.xp6(1),o.Q6J("ngIf",t.getErrors("author","maxlength"))}}function U(e,n){1&e&&(o.TgZ(0,"span",21),o._uU(1,"Genre Is Required"),o.qZA())}function I(e,n){if(1&e&&(o.TgZ(0,"div",22),o.TgZ(1,"div",23),o.TgZ(2,"small"),o._uU(3,"Form was submitted!"),o.qZA(),o.TgZ(4,"h3"),o._uU(5),o.qZA(),o.TgZ(6,"h4"),o._uU(7),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o._UZ(10,"img",24),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(5),o.hij("Title: ",t.bookDetails.title,""),o.xp6(2),o.hij("Author: ",t.bookDetails.author,""),o.xp6(2),o.hij("Genre: ",t.bookDetails.genre,""),o.xp6(1),o.Q6J("src",t.bookDetails.coverImgPath,o.LSH)("alt",t.bookDetails.title)}}let R=(()=>{class e{constructor(t){this.formBuilder=t,this.formWasSubmitted=!1,this.buildForm()}submitBook(){this.bookDetailsForm.invalid||(this.formWasSubmitted=!0,console.log(this.bookDetailsForm.value),this.bookDetails=Object.assign(Object.assign({},this.bookDetailsForm.value),{coverImgPath:"https://images.unsplash.com/photo-1516900448138-898720b936c7"}),setTimeout(()=>{this.bookDetailsForm.reset(),this.formWasSubmitted=!1},5e3))}buildForm(){this.bookDetailsForm=this.formBuilder.group({title:["",[s.kI.required,s.kI.maxLength(50)]],author:["",[s.kI.required,s.kI.maxLength(50)]],genre:["",s.kI.required]})}getErrors(t,i="required"){return this.bookDetailsForm.get(t).hasError(i)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.qu))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-form-reactive"]],decls:35,vars:6,consts:[[3,"formGroup","ngSubmit"],["id","book-form-data"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","formControlName","title",1,"form-control"],[4,"ngIf"],["for","author"],["type","text","name","author","id","author","formControlName","author",1,"form-control"],["for","genre"],["name","genre","id","genre","formControlName","genre",1,"form-control"],["value","Mystery"],["value","Self-Help"],["value","Fantasy"],["value","Science-Fiction"],["value","NonFiction"],["value","Drama"],["value","Accurate Historical Retelling"],["class","text-danger fs-6",4,"ngIf"],[1,"mt-4",2,"width","100%","text-align","center"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","row mt-4 ps-3",4,"ngIf"],[1,"text-danger","fs-6"],[1,"row","mt-4","ps-3"],[1,"col-xs-12"],[2,"max-width","150px","border-radius","15px",3,"src","alt"]],template:function(t,i){1&t&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return i.submitBook()}),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"label",3),o._uU(4,"Title"),o.qZA(),o._UZ(5,"input",4),o.YNc(6,x,3,2,"div",5),o.qZA(),o.TgZ(7,"div",2),o.TgZ(8,"label",6),o._uU(9,"Author"),o.qZA(),o._UZ(10,"input",7),o.YNc(11,F,3,2,"div",5),o.qZA(),o.TgZ(12,"div",2),o.TgZ(13,"label",8),o._uU(14,"Genre"),o.qZA(),o.TgZ(15,"select",9),o.TgZ(16,"option",10),o._uU(17,"Mystery"),o.qZA(),o.TgZ(18,"option",11),o._uU(19,"Self-Help"),o.qZA(),o.TgZ(20,"option",12),o._uU(21,"Fantasy"),o.qZA(),o.TgZ(22,"option",13),o._uU(23,"Science Fiction"),o.qZA(),o.TgZ(24,"option",14),o._uU(25,"NonFiction"),o.qZA(),o.TgZ(26,"option",15),o._uU(27,"Drama"),o.qZA(),o.TgZ(28,"option",16),o._uU(29,"Accurate Historical Retelling"),o.qZA(),o.qZA(),o.YNc(30,U,2,0,"span",17),o.TgZ(31,"div",18),o.TgZ(32,"button",19),o._uU(33,"Add Book"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(34,I,11,5,"div",20)),2&t&&(o.Q6J("formGroup",i.bookDetailsForm),o.xp6(6),o.Q6J("ngIf",i.bookDetailsForm.get("title").touched),o.xp6(5),o.Q6J("ngIf",i.bookDetailsForm.get("author").touched),o.xp6(19),o.Q6J("ngIf",i.bookDetailsForm.get("genre").invalid&&i.bookDetailsForm.get("genre").touched),o.xp6(2),o.Q6J("disabled",!1),o.xp6(2),o.Q6J("ngIf",i.formWasSubmitted))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,u.O5,s.EJ,s.YN,s.Kr],styles:[".form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),e})(),g=(()=>{class e{constructor(t,i){this.activatedRoute=t,this.bookshelfService=i,this.isEditMode=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{if(null==t["book-id"])return this.isEditMode=!1,void console.log("We are in Add-New-Book Mode!");this.isEditMode=!0,this.book=this.bookshelfService.getBookByIndex(+t["book-id"]),console.log("We are in Edit Mode. This is the book we selected: ",this.book)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.gz),o.Y36(c.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-edit"]],decls:1,vars:0,template:function(t,i){1&t&&o._UZ(0,"app-book-form-reactive")},directives:[R],styles:[""]}),e})();const w=[{path:"",component:_,canActivate:[r(9800).a],children:[{path:"",pathMatch:"full",component:f},{path:"new-book",component:g},{path:":book-id",component:h},{path:":book-id/edit",component:g}]}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[a.Bz.forChild(w)],a.Bz]}),e})();var J=r(4466);let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[u.ez,J.m,s.u5,s.UX,D]]}),e})()}}]);